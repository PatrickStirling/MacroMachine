<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="980" viewBox="0 0 1400 980">
  <defs>
    <style>
      .bg { fill: #f5f2ea; }
      .panel { fill: #ffffff; stroke: #1f2328; stroke-width: 2; }
      .block { fill: #fdfdfc; stroke: #1f2328; stroke-width: 1.5; }
      .code { font-family: "IBM Plex Mono", Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size: 14px; fill: #1f2328; }
      .title { font-family: "Space Grotesk", "IBM Plex Sans", "Segoe UI", sans-serif; font-size: 34px; font-weight: 700; fill: #111827; }
      .subtitle { font-family: "Space Grotesk", "IBM Plex Sans", "Segoe UI", sans-serif; font-size: 16px; fill: #374151; }
      .callout-title { font-family: "Space Grotesk", "IBM Plex Sans", "Segoe UI", sans-serif; font-size: 16px; font-weight: 700; fill: #111827; }
      .callout-text { font-family: "Space Grotesk", "IBM Plex Sans", "Segoe UI", sans-serif; font-size: 14px; fill: #1f2328; }
      .chip { fill: #111827; }
      .chip-text { fill: #ffffff; font-family: "Space Grotesk", "IBM Plex Sans", "Segoe UI", sans-serif; font-size: 13px; font-weight: 700; }
      .line { stroke: #111827; stroke-width: 1.5; }
      .note { font-family: "IBM Plex Mono", Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size: 12px; fill: #4b5563; }
    </style>
  </defs>

  <rect class="bg" x="0" y="0" width="1400" height="980" />

  <text class="title" x="60" y="70">Fusion .setting anatomy</text>
  <text class="subtitle" x="60" y="100">A compact map of the main blocks and what they control</text>

  <rect class="panel" x="60" y="130" width="780" height="790" rx="12" />
  <text class="code" x="90" y="165">-- file root (.setting)</text>

  <rect class="block" x="90" y="190" width="720" height="90" rx="10" />
  <text class="code" x="110" y="220">MacroOperator "MyMacro" {</text>
  <text class="code" x="110" y="242">  NameSet = true,</text>
  <text class="code" x="110" y="264">  ...</text>
  <circle class="chip" cx="785" cy="210" r="16" />
  <text class="chip-text" x="780" y="215" text-anchor="middle">1</text>

  <rect class="block" x="90" y="300" width="720" height="170" rx="10" />
  <text class="code" x="110" y="330">Inputs = ordered() {</text>
  <text class="code" x="130" y="352">InstanceInput {</text>
  <text class="code" x="150" y="374">SourceOp = "Transform1",</text>
  <text class="code" x="150" y="396">Source = "Blend",</text>
  <text class="code" x="150" y="418">Page = "Controls"</text>
  <text class="code" x="130" y="440">}, ...</text>
  <circle class="chip" cx="785" cy="315" r="16" />
  <text class="chip-text" x="780" y="320" text-anchor="middle">2</text>
  <circle class="chip" cx="785" cy="365" r="16" />
  <text class="chip-text" x="780" y="370" text-anchor="middle">3</text>

  <rect class="block" x="90" y="490" width="720" height="395" rx="10" />
  <text class="code" x="110" y="520">Tools = ordered() {</text>
  <text class="code" x="130" y="542">Transform1 = Transform {</text>
  <text class="code" x="150" y="564">Inputs = { ... }</text>
  <text class="code" x="150" y="586">UserControls = ordered() {</text>
  <text class="code" x="170" y="608">Controls = ControlPage {</text>
  <text class="code" x="190" y="630">CT_Visible = true,</text>
  <text class="code" x="190" y="652">CTID_DIB_ID = "Icons.Tools.Tabs.Controls"</text>
  <text class="code" x="170" y="674">}</text>
  <text class="code" x="150" y="696">}</text>
  <text class="code" x="150" y="718">ViewInfo = OperatorInfo { Pos = { 0, 0 } }</text>
  <text class="code" x="130" y="740">}</text>
  <text class="code" x="110" y="762">}</text>
  <circle class="chip" cx="785" cy="505" r="16" />
  <text class="chip-text" x="780" y="510" text-anchor="middle">4</text>
  <circle class="chip" cx="785" cy="595" r="16" />
  <text class="chip-text" x="780" y="600" text-anchor="middle">5</text>
  <circle class="chip" cx="785" cy="635" r="16" />
  <text class="chip-text" x="780" y="640" text-anchor="middle">6</text>
  <circle class="chip" cx="785" cy="720" r="16" />
  <text class="chip-text" x="780" y="725" text-anchor="middle">7</text>

  <rect class="panel" x="870" y="130" width="470" height="790" rx="12" />

  <text class="callout-title" x="900" y="170">What each block controls</text>

  <text class="callout-title" x="900" y="210">1. Macro wrapper</text>
  <text class="callout-text" x="900" y="230">GroupOperator or MacroOperator = the macro root</text>
  <text class="callout-text" x="900" y="250">Name here becomes the preset name in Fusion.</text>

  <text class="callout-title" x="900" y="285">2. Inputs block</text>
  <text class="callout-text" x="900" y="305">Defines the Published Controls list and its order.</text>

  <text class="callout-title" x="900" y="340">3. InstanceInput entry</text>
  <text class="callout-text" x="900" y="360">Maps a published control to SourceOp + Source.</text>
  <text class="callout-text" x="900" y="380">Includes Page and optional custom Name.</text>

  <text class="callout-title" x="900" y="415">4. Tools block</text>
  <text class="callout-text" x="900" y="435">The node graph: each tool, modifier, and input.</text>

  <text class="callout-title" x="900" y="470">5. UserControls</text>
  <text class="callout-text" x="900" y="490">Custom controls for a tool or the macro itself.</text>
  <text class="callout-text" x="900" y="510">Input type lives here (Slider, Checkbox, etc).</text>

  <text class="callout-title" x="900" y="545">6. ControlPage</text>
  <text class="callout-text" x="900" y="565">Defines tabs: visibility, icon, priority/order.</text>

  <text class="callout-title" x="900" y="600">7. ViewInfo / OperatorInfo</text>
  <text class="callout-text" x="900" y="620">Stores node positions and graph layout data.</text>

  <text class="callout-title" x="900" y="680">Common keys</text>
  <text class="callout-text" x="900" y="700">INPID_InputControl = UI type</text>
  <text class="callout-text" x="900" y="720">INP_Default / Min / Max = slider behavior</text>
  <text class="callout-text" x="900" y="740">CT_Priority = tab order</text>

  <line class="line" x1="802" y1="210" x2="870" y2="210" />
  <line class="line" x1="802" y1="315" x2="870" y2="300" />
  <line class="line" x1="802" y1="365" x2="870" y2="350" />
  <line class="line" x1="802" y1="505" x2="870" y2="430" />
  <line class="line" x1="802" y1="595" x2="870" y2="490" />
  <line class="line" x1="802" y1="635" x2="870" y2="560" />
  <line class="line" x1="802" y1="720" x2="870" y2="620" />

  <text class="note" x="60" y="950">Tip: Inputs order controls the Inspector order, UserControls defines UI structure.</text>
</svg>
